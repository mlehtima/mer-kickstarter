#if "Mic2Options"in $metadata and "Architecture" in $metadata
# -*-mic2-options-*- ${metadata.Mic2Options} --arch=${metadata.Architecture} -*-mic2-options-*-
#else if "Mic2Options" in $metadata
# -*-mic2-options-*- ${metadata.Mic2Options} -*-mic2-options-*-
#else if "Architecture" in $metadata
# -*-mic2-options-*- --arch=${metadata.Architecture} -*-mic2-options-*-
#end if
# ##############################################
# Do not Edit! Generated by:
# kickstarter.py
# ###############################################

#if "Language" in $metadata and $metadata.Language
lang ${metadata.Language}
#end if
#if "Keyboard" in $metadata and $metadata.Keyboard
keyboard ${metadata.Keyboard}
#end if
#if "Timezone" in $metadata and $metadata.Timezone
timezone --utc ${metadata.Timezone}
#end if
#if "Part" in $metadata
${metadata.Part}
#else
part / --size ${metadata.PartSize} --ondisk sda --fstype=${metadata.FileSystem}
#end if
#if "RootPass" in $metadata and $metadata.RootPass
rootpw ${metadata.RootPass}
#end if
#if "StartX" in $metadata
xconfig --startxonboot
#end if
#if "BootloaderTimeout" in $metadata or "BootloaderAppend" in $metadata or "BootloaderOptions" in $metadata
bootloader #slurp
#end if
#if "BootloaderTimeout" in $metadata
 --timeout=${metadata.BootloaderTimeout} #slurp
#end if
#if "BootloaderAppend" in $metadata
 --append="${metadata.BootloaderAppend}" #slurp
#end if
#if "BootloaderOptions" in $metadata
  ${metadata.BootloaderOptions}
#end if
#if "Desktop" in $metadata

desktop #slurp
#if "DefaultUser" in $metadata and $metadata.DefaultUser
--autologinuser=${metadata.DefaultUser}  #slurp
#end if
#if $metadata.Desktop != "None"
--defaultdesktop=${metadata.Desktop} #slurp
#end if
#if "Session" in $metadata
--session="${metadata.Session}"
#end if
#end if
#if "DefaultUser" in $metadata and $metadata.DefaultUser

user --name ${metadata.DefaultUser}  --groups audio,video --password ${metadata.DefaultUserPass} 
#end if

#set $options_global = ""
#if "RepositoryOptions" in $metadata
#set $options_global = $metadata.RepositoryOptions
#end if
## Go though repositories mentioned for this config
#for $r in $metadata.Repos
## Use global options by default
#set $repo_options = $options_global
#set $repo_url = ""
## Search through all repos available in .yaml
#for $rr in $repos
#if $rr.Name == $r
#set $repo_url = $rr.Url
#if "Options" in $rr and $rr.Options
#set $repo_options += " "+$rr.Options
#end if
#end if
#end for
#if $repo_url != ""
## We found a repository \o/
repo --name=${r} --baseurl=${repo_url} ${repo_options}
#end if
#end for

#if "Pre" in $metadata
%pre
${metadata.Pre}
%end
#end if

#if "PackageArgs" in $metadata
%packages --${metadata.PackageArgs}
#else
%packages
#end if
#if "Groups" in $metadata
#for $g in $metadata.Groups
@${g}
#end for

#end if
#if "Kernel" in $metadata
$metadata.Kernel

#end if
#if "ExtraPackages" in $metadata
#for $e in $metadata.ExtraPackages
${e}
#end for
#end if
#if "RemovePackages" in $metadata
#for $e in $metadata.RemovePackages
-${e}
#end for
#end if
%end

#if "Post" in $metadata
%post
${metadata.Post}
%end
#end if
#if "NoChroot" in $metadata

%post --nochroot
${metadata.NoChroot}
%end
#end if
